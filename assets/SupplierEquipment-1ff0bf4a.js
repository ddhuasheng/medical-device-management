import{q as M,r as b,o as Ne,b as i,v as De,d as p,e as w,f as e,w as l,g as j,E as I,B as te,F as N,h as D,k as n,j as E,x as he,i as k,t as c,y as ue,z as xe,A as Ue}from"./index-7b3de2f1.js";import{_ as Se}from"./_plugin-vue_export-helper-c27b6911.js";const Te={class:"supplier-equipment-container"},Be={class:"table-toolbar"},Pe={class:"pagination-container"},je={class:"dialog-footer"},Ee={key:1},ze={key:0,class:"image-preview"},Fe={key:1},Me={__name:"SupplierEquipment",setup($e){const $=[{value:"active",label:"在售"},{value:"discontinued",label:"停产"},{value:"upcoming",label:"即将上市"}],O=o=>{switch(o){case"active":return"success";case"discontinued":return"info";case"upcoming":return"warning";default:return"info"}},R=o=>{const a=$.find(g=>g.value===o);return a?a.label:o},Y=o=>`¥ ${Number(o).toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,s=M({equipmentName:"",supplierId:"",categoryId:""}),oe=()=>{s.equipmentName="",s.supplierId="",s.categoryId="",L()},L=()=>{h.value=1,V()},z=b(!1),A=b([]),h=b(1),x=b(10),G=b(0),T=b([]),V=()=>{z.value=!0,setTimeout(()=>{let a=[...[{id:1,equipmentCode:"SB20230001",equipmentName:"CT扫描仪",supplierId:1,supplierName:"北京医疗设备有限公司",categoryId:1,categoryName:"影像设备",model:"CT-X100",specification:"16排螺旋CT",price:15e5,warrantyPeriod:36,manufacturer:"西门子医疗器械（上海）有限公司",productionDate:"2023-05-15",status:"active",manual:"manual1.pdf",images:["image1.jpg","image2.jpg"],createTime:"2023-06-15 10:30:00",remark:"高端CT设备，适用于各类医院放射科"},{id:2,equipmentCode:"SB20230002",equipmentName:"呼吸机",supplierId:2,supplierName:"上海医疗器械有限公司",categoryId:2,categoryName:"生命支持设备",model:"HX-2000",specification:"高频呼吸机",price:12e4,warrantyPeriod:24,manufacturer:"飞利浦医疗系统有限公司",productionDate:"2023-04-20",status:"active",manual:"manual2.pdf",images:["image3.jpg"],createTime:"2023-06-20 14:20:00",remark:"适用于ICU重症患者"},{id:3,equipmentCode:"SB20230003",equipmentName:"MRI设备",supplierId:1,supplierName:"北京医疗设备有限公司",categoryId:1,categoryName:"影像设备",model:"MRI-3000",specification:"3.0T超导型",price:3e6,warrantyPeriod:48,manufacturer:"GE医疗系统贸易（上海）有限公司",productionDate:"2023-03-10",status:"upcoming",manual:"manual3.pdf",images:["image4.jpg","image5.jpg","image6.jpg"],createTime:"2023-07-05 09:15:00",remark:"高端磁共振成像设备"},{id:4,equipmentCode:"SB20230004",equipmentName:"心电图机",supplierId:3,supplierName:"广州医疗科技有限公司",categoryId:3,categoryName:"诊断设备",model:"ECG-300",specification:"12导联",price:5e4,warrantyPeriod:24,manufacturer:"深圳迈瑞生物医疗电子股份有限公司",productionDate:"2023-02-25",status:"discontinued",manual:"manual4.pdf",images:["image7.jpg"],createTime:"2023-07-10 16:45:00",remark:"常规心电图检查设备"}]];s.equipmentName&&(a=a.filter(v=>v.equipmentName.includes(s.equipmentName))),s.supplierId&&(a=a.filter(v=>v.supplierId===parseInt(s.supplierId))),s.categoryId&&(a=a.filter(v=>v.categoryId===parseInt(s.categoryId))),G.value=a.length;const g=(h.value-1)*x.value,d=g+x.value;A.value=a.slice(g,d),z.value=!1},500)},ne=o=>{T.value=o},re=o=>{x.value=o,V()},ie=o=>{h.value=o,V()},X=b([{value:1,label:"北京医疗设备有限公司"},{value:2,label:"上海医疗器械有限公司"},{value:3,label:"广州医疗科技有限公司"}]),H=b([{value:1,label:"影像设备"},{value:2,label:"生命支持设备"},{value:3,label:"诊断设备"},{value:4,label:"治疗设备"},{value:5,label:"监护设备"},{value:6,label:"手术设备"}]),C=b(!1),U=b("add"),J=b(null),F=b(!1),u=M({id:null,equipmentCode:"",equipmentName:"",supplierId:"",categoryId:"",model:"",specification:"",price:0,warrantyPeriod:12,manufacturer:"",productionDate:"",status:"active",manual:null,images:[],remark:""}),r=M({id:null,equipmentCode:"",equipmentName:"",supplierId:"",supplierName:"",categoryId:"",categoryName:"",model:"",specification:"",price:0,warrantyPeriod:0,manufacturer:"",productionDate:"",status:"",manual:null,images:[],createTime:"",remark:""}),de={equipmentCode:[{required:!0,message:"请输入设备编码",trigger:"blur"}],equipmentName:[{required:!0,message:"请输入设备名称",trigger:"blur"}],supplierId:[{required:!0,message:"请选择供应商",trigger:"change"}],categoryId:[{required:!0,message:"请选择设备分类",trigger:"change"}],model:[{required:!0,message:"请输入设备型号",trigger:"blur"}],price:[{required:!0,message:"请输入单价",trigger:"blur"}],manufacturer:[{required:!0,message:"请输入生产厂商",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},pe=()=>{U.value="add",K(),C.value=!0},se=o=>{U.value="edit",K(),Object.assign(u,o),C.value=!0},me=o=>{Object.assign(r,o),F.value=!0},K=()=>{u.id=null,u.equipmentCode="",u.equipmentName="",u.supplierId="",u.categoryId="",u.model="",u.specification="",u.price=0,u.warrantyPeriod=12,u.manufacturer="",u.productionDate="",u.status="active",u.manual=null,u.images=[],u.remark=""},ce=()=>{J.value.validate(o=>{o&&(I.success(U.value==="add"?"新增成功":"编辑成功"),C.value=!1,V())})},fe=o=>{te.confirm("确定要删除该设备吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{I.success("删除成功"),V()}).catch(()=>{})},ge=()=>{if(T.value.length===0){I.warning("请选择要删除的设备");return}te.confirm(`确定要删除选中的 ${T.value.length} 个设备吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{I.success("批量删除成功"),V()}).catch(()=>{})},_e=()=>{I.success("导出成功")},be=o=>{u.manual=o.raw},ve=o=>{u.images.push(o.raw)},ye=o=>{I.info("查看说明书："+o.manual)};return Ne(()=>{V()}),(o,a)=>{const g=i("el-input"),d=i("el-form-item"),v=i("el-option"),S=i("el-select"),_=i("el-button"),Q=i("el-form"),W=i("el-card"),B=i("el-icon"),f=i("el-table-column"),Z=i("el-tag"),we=i("el-table"),Ve=i("el-pagination"),y=i("el-col"),q=i("el-row"),ee=i("el-input-number"),ke=i("el-date-picker"),le=i("el-upload"),ae=i("el-dialog"),m=i("el-descriptions-item"),Ce=i("el-image"),qe=i("el-descriptions"),Ie=De("loading");return p(),w("div",Te,[e(W,{class:"search-card"},{default:l(()=>[e(Q,{inline:!0,model:s,class:"search-form"},{default:l(()=>[e(d,{label:"设备名称"},{default:l(()=>[e(g,{modelValue:s.equipmentName,"onUpdate:modelValue":a[0]||(a[0]=t=>s.equipmentName=t),placeholder:"请输入设备名称",clearable:""},null,8,["modelValue"])]),_:1}),e(d,{label:"供应商"},{default:l(()=>[e(S,{modelValue:s.supplierId,"onUpdate:modelValue":a[1]||(a[1]=t=>s.supplierId=t),placeholder:"请选择供应商",clearable:"",filterable:""},{default:l(()=>[(p(!0),w(N,null,D(X.value,t=>(p(),k(v,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"设备分类"},{default:l(()=>[e(S,{modelValue:s.categoryId,"onUpdate:modelValue":a[2]||(a[2]=t=>s.categoryId=t),placeholder:"请选择设备分类",clearable:"",filterable:""},{default:l(()=>[(p(!0),w(N,null,D(H.value,t=>(p(),k(v,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:l(()=>[e(_,{type:"primary",onClick:L},{default:l(()=>a[21]||(a[21]=[n("搜索")])),_:1}),e(_,{onClick:oe},{default:l(()=>a[22]||(a[22]=[n("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),j("div",Be,[e(_,{type:"primary",onClick:pe},{default:l(()=>[e(B,null,{default:l(()=>[e(E(ue))]),_:1}),a[23]||(a[23]=n("新增设备 "))]),_:1}),e(_,{type:"danger",disabled:!T.value.length,onClick:ge},{default:l(()=>[e(B,null,{default:l(()=>[e(E(xe))]),_:1}),a[24]||(a[24]=n("批量删除 "))]),_:1},8,["disabled"]),e(_,{type:"success",onClick:_e},{default:l(()=>[e(B,null,{default:l(()=>[e(E(Ue))]),_:1}),a[25]||(a[25]=n("导出 "))]),_:1})]),e(W,{class:"table-card"},{default:l(()=>[he((p(),k(we,{data:A.value,border:"",style:{width:"100%"},onSelectionChange:ne},{default:l(()=>[e(f,{type:"selection",width:"55"}),e(f,{prop:"equipmentCode",label:"设备编码",width:"120"}),e(f,{prop:"equipmentName",label:"设备名称",width:"150"}),e(f,{prop:"supplierName",label:"供应商",width:"180"}),e(f,{prop:"categoryName",label:"设备分类",width:"120"}),e(f,{prop:"model",label:"设备型号",width:"120"}),e(f,{prop:"specification",label:"规格",width:"120"}),e(f,{prop:"price",label:"单价",width:"120"},{default:l(t=>[n(c(Y(t.row.price)),1)]),_:1}),e(f,{prop:"warrantyPeriod",label:"质保期(月)",width:"100"}),e(f,{prop:"manufacturer",label:"生产厂商",width:"180"}),e(f,{prop:"productionDate",label:"生产日期",width:"120"}),e(f,{prop:"status",label:"状态",width:"100"},{default:l(t=>[e(Z,{type:O(t.row.status)},{default:l(()=>[n(c(R(t.row.status)),1)]),_:2},1032,["type"])]),_:1}),e(f,{label:"操作",fixed:"right",width:"200"},{default:l(t=>[e(_,{type:"primary",link:"",onClick:P=>me(t.row)},{default:l(()=>a[26]||(a[26]=[n(" 查看 ")])),_:2},1032,["onClick"]),e(_,{type:"primary",link:"",onClick:P=>se(t.row)},{default:l(()=>a[27]||(a[27]=[n(" 编辑 ")])),_:2},1032,["onClick"]),e(_,{type:"danger",link:"",onClick:P=>fe(t.row)},{default:l(()=>a[28]||(a[28]=[n(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ie,z.value]]),j("div",Pe,[e(Ve,{"current-page":h.value,"onUpdate:currentPage":a[3]||(a[3]=t=>h.value=t),"page-size":x.value,"onUpdate:pageSize":a[4]||(a[4]=t=>x.value=t),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:G.value,onSizeChange:re,onCurrentChange:ie},null,8,["current-page","page-size","total"])])]),_:1}),e(ae,{title:U.value==="add"?"新增设备":"编辑设备",modelValue:C.value,"onUpdate:modelValue":a[18]||(a[18]=t=>C.value=t),width:"700px"},{footer:l(()=>[j("span",je,[e(_,{onClick:a[17]||(a[17]=t=>C.value=!1)},{default:l(()=>a[31]||(a[31]=[n("取消")])),_:1}),e(_,{type:"primary",onClick:ce},{default:l(()=>a[32]||(a[32]=[n("确定")])),_:1})])]),default:l(()=>[e(Q,{ref_key:"formRef",ref:J,model:u,rules:de,"label-width":"100px"},{default:l(()=>[e(q,{gutter:20},{default:l(()=>[e(y,{span:12},{default:l(()=>[e(d,{label:"设备编码",prop:"equipmentCode"},{default:l(()=>[e(g,{modelValue:u.equipmentCode,"onUpdate:modelValue":a[5]||(a[5]=t=>u.equipmentCode=t),placeholder:"请输入设备编码",disabled:U.value==="edit"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(y,{span:12},{default:l(()=>[e(d,{label:"设备名称",prop:"equipmentName"},{default:l(()=>[e(g,{modelValue:u.equipmentName,"onUpdate:modelValue":a[6]||(a[6]=t=>u.equipmentName=t),placeholder:"请输入设备名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(q,{gutter:20},{default:l(()=>[e(y,{span:12},{default:l(()=>[e(d,{label:"供应商",prop:"supplierId"},{default:l(()=>[e(S,{modelValue:u.supplierId,"onUpdate:modelValue":a[7]||(a[7]=t=>u.supplierId=t),placeholder:"请选择供应商",filterable:""},{default:l(()=>[(p(!0),w(N,null,D(X.value,t=>(p(),k(v,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(y,{span:12},{default:l(()=>[e(d,{label:"设备分类",prop:"categoryId"},{default:l(()=>[e(S,{modelValue:u.categoryId,"onUpdate:modelValue":a[8]||(a[8]=t=>u.categoryId=t),placeholder:"请选择设备分类",filterable:""},{default:l(()=>[(p(!0),w(N,null,D(H.value,t=>(p(),k(v,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(q,{gutter:20},{default:l(()=>[e(y,{span:12},{default:l(()=>[e(d,{label:"设备型号",prop:"model"},{default:l(()=>[e(g,{modelValue:u.model,"onUpdate:modelValue":a[9]||(a[9]=t=>u.model=t),placeholder:"请输入设备型号"},null,8,["modelValue"])]),_:1})]),_:1}),e(y,{span:12},{default:l(()=>[e(d,{label:"规格",prop:"specification"},{default:l(()=>[e(g,{modelValue:u.specification,"onUpdate:modelValue":a[10]||(a[10]=t=>u.specification=t),placeholder:"请输入规格"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(q,{gutter:20},{default:l(()=>[e(y,{span:12},{default:l(()=>[e(d,{label:"单价",prop:"price"},{default:l(()=>[e(ee,{modelValue:u.price,"onUpdate:modelValue":a[11]||(a[11]=t=>u.price=t),min:0,precision:2,step:100,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(y,{span:12},{default:l(()=>[e(d,{label:"质保期(月)",prop:"warrantyPeriod"},{default:l(()=>[e(ee,{modelValue:u.warrantyPeriod,"onUpdate:modelValue":a[12]||(a[12]=t=>u.warrantyPeriod=t),min:0,precision:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(q,{gutter:20},{default:l(()=>[e(y,{span:12},{default:l(()=>[e(d,{label:"生产厂商",prop:"manufacturer"},{default:l(()=>[e(g,{modelValue:u.manufacturer,"onUpdate:modelValue":a[13]||(a[13]=t=>u.manufacturer=t),placeholder:"请输入生产厂商"},null,8,["modelValue"])]),_:1})]),_:1}),e(y,{span:12},{default:l(()=>[e(d,{label:"生产日期",prop:"productionDate"},{default:l(()=>[e(ke,{modelValue:u.productionDate,"onUpdate:modelValue":a[14]||(a[14]=t=>u.productionDate=t),type:"date",placeholder:"选择生产日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(q,{gutter:20},{default:l(()=>[e(y,{span:12},{default:l(()=>[e(d,{label:"状态",prop:"status"},{default:l(()=>[e(S,{modelValue:u.status,"onUpdate:modelValue":a[15]||(a[15]=t=>u.status=t),placeholder:"请选择状态"},{default:l(()=>[(p(),w(N,null,D($,t=>e(v,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(d,{label:"设备说明书",prop:"manual"},{default:l(()=>[e(le,{class:"upload-demo",action:"#","auto-upload":!1,"on-change":be,limit:1},{trigger:l(()=>[e(_,{type:"primary"},{default:l(()=>a[29]||(a[29]=[n("选择文件")])),_:1})]),tip:l(()=>a[30]||(a[30]=[j("div",{class:"el-upload__tip"},"请上传设备说明书，支持PDF格式",-1)])),_:1})]),_:1}),e(d,{label:"设备图片",prop:"image"},{default:l(()=>[e(le,{class:"upload-demo",action:"#","auto-upload":!1,"on-change":ve,limit:5,"list-type":"picture-card"},{default:l(()=>[e(B,null,{default:l(()=>[e(E(ue))]),_:1})]),_:1})]),_:1}),e(d,{label:"备注",prop:"remark"},{default:l(()=>[e(g,{modelValue:u.remark,"onUpdate:modelValue":a[16]||(a[16]=t=>u.remark=t),type:"textarea",placeholder:"请输入备注信息",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"]),e(ae,{title:"设备详情",modelValue:F.value,"onUpdate:modelValue":a[20]||(a[20]=t=>F.value=t),width:"700px"},{default:l(()=>[e(qe,{column:2,border:""},{default:l(()=>[e(m,{label:"设备编码"},{default:l(()=>[n(c(r.equipmentCode),1)]),_:1}),e(m,{label:"设备名称"},{default:l(()=>[n(c(r.equipmentName),1)]),_:1}),e(m,{label:"供应商"},{default:l(()=>[n(c(r.supplierName),1)]),_:1}),e(m,{label:"设备分类"},{default:l(()=>[n(c(r.categoryName),1)]),_:1}),e(m,{label:"设备型号"},{default:l(()=>[n(c(r.model),1)]),_:1}),e(m,{label:"规格"},{default:l(()=>[n(c(r.specification),1)]),_:1}),e(m,{label:"单价"},{default:l(()=>[n(c(Y(r.price)),1)]),_:1}),e(m,{label:"质保期(月)"},{default:l(()=>[n(c(r.warrantyPeriod),1)]),_:1}),e(m,{label:"生产厂商"},{default:l(()=>[n(c(r.manufacturer),1)]),_:1}),e(m,{label:"生产日期"},{default:l(()=>[n(c(r.productionDate),1)]),_:1}),e(m,{label:"状态"},{default:l(()=>[e(Z,{type:O(r.status)},{default:l(()=>[n(c(R(r.status)),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"创建时间"},{default:l(()=>[n(c(r.createTime),1)]),_:1}),e(m,{label:"设备说明书",span:2},{default:l(()=>[r.manual?(p(),k(_,{key:0,type:"primary",link:"",onClick:a[19]||(a[19]=t=>ye(r))},{default:l(()=>a[33]||(a[33]=[n(" 查看 ")])),_:1})):(p(),w("span",Ee,"未上传"))]),_:1}),e(m,{label:"设备图片",span:2},{default:l(()=>[r.images&&r.images.length?(p(),w("div",ze,[(p(!0),w(N,null,D(r.images,(t,P)=>(p(),k(Ce,{key:P,src:t,"preview-src-list":r.images,fit:"cover",class:"preview-image"},null,8,["src","preview-src-list"]))),128))])):(p(),w("span",Fe,"未上传"))]),_:1}),e(m,{label:"备注",span:2},{default:l(()=>[n(c(r.remark),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Ye=Se(Me,[["__scopeId","data-v-64e0fc51"]]);export{Ye as default};
