import{_ as A}from"./plugin-vueexport-helper-c27b6911.js";import{r as b,q as g,b as s,d as i,e as p,f as e,w as l,F as V,h as k,k as x,E as B,i as D}from"./index-8e7c3932.js";const E={class:"page-container"},H={__name:"AssetScrap",setup(L){const c=b(null),t=g({deviceName:"",deviceId:"",reason:"",images:[],scrapTime:"",status:"待确认"}),y=[{value:"待确认",label:"待确认"},{value:"驳回",label:"驳回"},{value:"确认报废",label:"确认报废"}],m=b([{id:"001",name:"CT扫描仪"},{id:"002",name:"MRI设备"}]),I=g({deviceName:[{required:!0,message:"请选择设备",trigger:"change"}],reason:[{required:!0,message:"请输入报废原因",trigger:"blur"}],scrapTime:[{required:!0,message:"请选择报废时间",trigger:"change"}]}),C=n=>{const a=m.value.find(r=>r.id===n);t.deviceId=a?a.id:""},N=(n,a)=>{t.images.push({name:a.name,url:n.url})},T=n=>{const a=t.images.findIndex(r=>r.uid===n.uid);t.images.splice(a,1)},w=()=>{c.value.validate(n=>{if(n)B.success("提交成功");else return!1})},U=()=>{c.value.resetFields()};return(n,a)=>{const r=s("el-option"),_=s("el-select"),d=s("el-form-item"),u=s("el-col"),f=s("el-input"),F=s("Plus"),q=s("el-icon"),M=s("el-upload"),R=s("el-date-picker"),S=s("el-row"),v=s("el-button"),Y=s("el-form"),h=s("el-card");return i(),p("div",E,[e(h,{class:"form-card"},{default:l(()=>[e(Y,{model:t,rules:I,ref_key:"formRef",ref:c,"label-width":"120px"},{default:l(()=>[e(S,{gutter:20},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(d,{label:"设备名称",prop:"deviceName"},{default:l(()=>[e(_,{modelValue:t.deviceName,"onUpdate:modelValue":a[0]||(a[0]=o=>t.deviceName=o),filterable:"",placeholder:"请选择设备",onChange:C},{default:l(()=>[(i(!0),p(V,null,k(m.value,o=>(i(),D(r,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(d,{label:"设备编号",prop:"deviceId"},{default:l(()=>[e(f,{modelValue:t.deviceId,"onUpdate:modelValue":a[1]||(a[1]=o=>t.deviceId=o),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:l(()=>[e(d,{label:"报废原因",prop:"reason"},{default:l(()=>[e(f,{modelValue:t.reason,"onUpdate:modelValue":a[2]||(a[2]=o=>t.reason=o),type:"textarea",rows:4,placeholder:"请输入详细报废原因"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:l(()=>[e(d,{label:"报废图片",prop:"images"},{default:l(()=>[e(M,{action:"/api/upload","list-type":"picture-card",limit:5,"file-list":t.images,"on-success":N,"on-remove":T},{default:l(()=>[e(q,null,{default:l(()=>[e(F)]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(d,{label:"报废时间",prop:"scrapTime"},{default:l(()=>[e(R,{modelValue:t.scrapTime,"onUpdate:modelValue":a[3]||(a[3]=o=>t.scrapTime=o),type:"datetime",placeholder:"选择日期时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(d,{label:"当前状态",prop:"status"},{default:l(()=>[e(_,{modelValue:t.status,"onUpdate:modelValue":a[4]||(a[4]=o=>t.status=o),placeholder:"请选择状态",disabled:t.status==="确认报废"},{default:l(()=>[(i(),p(V,null,k(y,o=>e(r,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(d,{class:"form-footer"},{default:l(()=>[e(v,{type:"primary",onClick:w},{default:l(()=>a[5]||(a[5]=[x("提交申请")])),_:1}),e(v,{onClick:U},{default:l(()=>a[6]||(a[6]=[x("重置")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})])}}},j=A(H,[["__scopeId","data-v-aff091dd"]]);export{j as default};
