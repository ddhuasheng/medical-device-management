import{_ as ee}from"./plugin-vueexport-helper-c27b6911.js";import{q as R,r as g,o as le,b as p,v as te,d as u,e as V,g as q,f as t,w as a,x as ae,i as d,k as s,F as I,h as N,l as C,E as $,B as oe}from"./index-8e7c3932.js";const ue={class:"outbound-management-container"},ne={class:"page-header"},de={class:"search-container"},re={class:"pagination-container"},se={class:"dialog-footer"},ie={__name:"OutboundManagement",setup(pe){const i=R({warehouseId:"",equipmentName:"",departmentId:"",status:"",outboundTimeRange:[]}),z=g([]),U=g(!1),c=g(1),x=g(10),D=g(0),k=g(!1),y=g("add"),T=g(null),o=R({id:"",warehouseId:"",equipmentId:"",quantity:1,recipientName:"",departmentId:"",outboundTime:"",purpose:"",responsiblePerson:"",status:"待审核",remark:""}),j={warehouseId:[{required:!0,message:"请选择仓库",trigger:"change"}],equipmentId:[{required:!0,message:"请选择设备",trigger:"change"}],quantity:[{required:!0,message:"请输入数量",trigger:"blur"}],recipientName:[{required:!0,message:"请输入领用人",trigger:"blur"}],departmentId:[{required:!0,message:"请选择领用科室",trigger:"change"}],outboundTime:[{required:!0,message:"请选择出库时间",trigger:"change"}],purpose:[{required:!0,message:"请选择用途",trigger:"change"}],responsiblePerson:[{required:!0,message:"请输入责任人",trigger:"blur"}]},M=g([{id:1,name:"医疗设备仓库"},{id:2,name:"耗材仓库"}]),F=g([{id:1,name:"呼吸机",model:"HX-100"},{id:2,name:"心电监护仪",model:"ECG-200"},{id:3,name:"超声诊断仪",model:"US-300"},{id:4,name:"血液分析仪",model:"BA-400"}]),O=g([{id:1,name:"内科"},{id:2,name:"外科"},{id:3,name:"儿科"},{id:4,name:"妇产科"},{id:5,name:"急诊科"}]);le(()=>{_()});const _=()=>{U.value=!0,setTimeout(()=>{z.value=[{id:"CK20230001",warehouseId:1,warehouseName:"医疗设备仓库",equipmentId:1,equipmentName:"呼吸机",quantity:2,recipientName:"张医生",departmentId:1,departmentName:"内科",outboundTime:"2023-06-15 09:30:00",purpose:"科室自用",responsiblePerson:"李主任",status:"已出库",remark:"内科急需使用"},{id:"CK20230002",warehouseId:1,warehouseName:"医疗设备仓库",equipmentId:2,equipmentName:"心电监护仪",quantity:1,recipientName:"王医生",departmentId:5,departmentName:"急诊科",outboundTime:"2023-06-18 14:20:00",purpose:"科室自用",responsiblePerson:"赵主任",status:"已出库",remark:"急诊科设备更新"},{id:"CK20230003",warehouseId:1,warehouseName:"医疗设备仓库",equipmentId:3,equipmentName:"超声诊断仪",quantity:1,recipientName:"刘医生",departmentId:4,departmentName:"妇产科",outboundTime:"2023-06-20 10:15:00",purpose:"借调",responsiblePerson:"陈主任",status:"待审核",remark:"临时借用一周"},{id:"CK20230004",warehouseId:2,warehouseName:"耗材仓库",equipmentId:4,equipmentName:"血液分析仪",quantity:1,recipientName:"孙医生",departmentId:2,departmentName:"外科",outboundTime:"2023-06-22 16:45:00",purpose:"退货",responsiblePerson:"吴主任",status:"已作废",remark:"设备存在质量问题"}],D.value=4,U.value=!1},500)},S=()=>{c.value=1,_()},K=()=>{Object.keys(i).forEach(m=>{i[m]=""}),i.outboundTimeRange=[],S()},H=m=>{x.value=m,_()},A=m=>{c.value=m,_()},P=(m,e)=>{y.value=m,k.value=!0,T.value&&T.value.resetFields(),m==="add"?(Object.keys(o).forEach(n=>{n!=="quantity"&&n!=="status"&&(o[n]="")}),o.quantity=1,o.status="待审核",o.outboundTime=new Date().toISOString().slice(0,19).replace("T"," ")):Object.keys(o).forEach(n=>{n in e&&(o[n]=e[n])})},G=()=>{T.value.validate(m=>{m&&($.success(y.value==="add"?"新增成功":"修改成功"),k.value=!1,_())})},L=m=>{oe.confirm("确定要删除该出库记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{$.success("删除成功"),_()}).catch(()=>{})};return(m,e)=>{const n=p("el-button"),b=p("el-option"),v=p("el-select"),r=p("el-form-item"),h=p("el-input"),B=p("el-date-picker"),E=p("el-form"),f=p("el-table-column"),w=p("el-tag"),X=p("el-table"),J=p("el-pagination"),Q=p("el-input-number"),W=p("el-dialog"),Z=te("loading");return u(),V("div",ue,[q("div",ne,[e[20]||(e[20]=q("h2",null,"出库管理",-1)),t(n,{type:"primary",onClick:e[0]||(e[0]=l=>P("add"))},{default:a(()=>e[19]||(e[19]=[s("新增出库")])),_:1})]),q("div",de,[t(E,{inline:!0,model:i,class:"search-form"},{default:a(()=>[t(r,{label:"仓库名称"},{default:a(()=>[t(v,{modelValue:i.warehouseId,"onUpdate:modelValue":e[1]||(e[1]=l=>i.warehouseId=l),placeholder:"请选择仓库",clearable:""},{default:a(()=>[(u(!0),V(I,null,N(M.value,l=>(u(),d(b,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"设备名称"},{default:a(()=>[t(h,{modelValue:i.equipmentName,"onUpdate:modelValue":e[2]||(e[2]=l=>i.equipmentName=l),placeholder:"请输入设备名称",clearable:""},null,8,["modelValue"])]),_:1}),t(r,{label:"领用科室"},{default:a(()=>[t(v,{modelValue:i.departmentId,"onUpdate:modelValue":e[3]||(e[3]=l=>i.departmentId=l),placeholder:"请选择科室",clearable:""},{default:a(()=>[(u(!0),V(I,null,N(O.value,l=>(u(),d(b,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"状态"},{default:a(()=>[t(v,{modelValue:i.status,"onUpdate:modelValue":e[4]||(e[4]=l=>i.status=l),placeholder:"请选择状态",clearable:""},{default:a(()=>[t(b,{label:"已出库",value:"已出库"}),t(b,{label:"待审核",value:"待审核"}),t(b,{label:"已作废",value:"已作废"}),t(b,{label:"驳回",value:"驳回"})]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"出库时间"},{default:a(()=>[t(B,{modelValue:i.outboundTimeRange,"onUpdate:modelValue":e[5]||(e[5]=l=>i.outboundTimeRange=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(r,null,{default:a(()=>[t(n,{type:"primary",onClick:S},{default:a(()=>e[21]||(e[21]=[s("搜索")])),_:1}),t(n,{onClick:K},{default:a(()=>e[22]||(e[22]=[s("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),ae((u(),d(X,{data:z.value,border:"",style:{width:"100%"}},{default:a(()=>[t(f,{prop:"id",label:"出库单号",width:"120"}),t(f,{prop:"warehouseName",label:"仓库名称",width:"120"}),t(f,{prop:"equipmentName",label:"设备名称",width:"120"}),t(f,{prop:"quantity",label:"数量",width:"80"}),t(f,{prop:"recipientName",label:"领用人",width:"100"}),t(f,{prop:"departmentName",label:"领用科室",width:"120"}),t(f,{prop:"outboundTime",label:"出库时间",width:"180"}),t(f,{prop:"purpose",label:"用途",width:"100"},{default:a(l=>[l.row.purpose==="借调"?(u(),d(w,{key:0,type:"primary"},{default:a(()=>e[23]||(e[23]=[s("借调")])),_:1})):l.row.purpose==="科室自用"?(u(),d(w,{key:1,type:"success"},{default:a(()=>e[24]||(e[24]=[s("科室自用")])),_:1})):l.row.purpose==="退货"?(u(),d(w,{key:2,type:"warning"},{default:a(()=>e[25]||(e[25]=[s("退货")])),_:1})):C("",!0)]),_:1}),t(f,{prop:"responsiblePerson",label:"责任人",width:"100"}),t(f,{prop:"status",label:"状态",width:"100"},{default:a(l=>[l.row.status==="已出库"?(u(),d(w,{key:0,type:"success"},{default:a(()=>e[26]||(e[26]=[s("已出库")])),_:1})):l.row.status==="待审核"?(u(),d(w,{key:1,type:"warning"},{default:a(()=>e[27]||(e[27]=[s("待审核")])),_:1})):l.row.status==="已作废"?(u(),d(w,{key:2,type:"info"},{default:a(()=>e[28]||(e[28]=[s("已作废")])),_:1})):l.row.status==="驳回"?(u(),d(w,{key:3,type:"danger"},{default:a(()=>e[29]||(e[29]=[s("驳回")])),_:1})):C("",!0)]),_:1}),t(f,{label:"操作",width:"200",fixed:"right"},{default:a(l=>[t(n,{size:"small",type:"primary",onClick:Y=>P("view",l.row)},{default:a(()=>e[30]||(e[30]=[s("查看")])),_:2},1032,["onClick"]),l.row.status==="待审核"?(u(),d(n,{key:0,size:"small",type:"success",onClick:Y=>P("edit",l.row)},{default:a(()=>e[31]||(e[31]=[s("编辑")])),_:2},1032,["onClick"])):C("",!0),l.row.status==="待审核"?(u(),d(n,{key:1,size:"small",type:"danger",onClick:Y=>L(l.row)},{default:a(()=>e[32]||(e[32]=[s("删除")])),_:2},1032,["onClick"])):C("",!0)]),_:1})]),_:1},8,["data"])),[[Z,U.value]]),q("div",re,[t(J,{"current-page":c.value,"onUpdate:currentPage":e[6]||(e[6]=l=>c.value=l),"page-size":x.value,"onUpdate:pageSize":e[7]||(e[7]=l=>x.value=l),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:D.value,onSizeChange:H,onCurrentChange:A},null,8,["current-page","page-size","total"])]),t(W,{title:y.value==="add"?"新增出库":y.value==="edit"?"编辑出库":"查看出库详情",modelValue:k.value,"onUpdate:modelValue":e[18]||(e[18]=l=>k.value=l),width:"650px"},{footer:a(()=>[q("span",se,[t(n,{onClick:e[17]||(e[17]=l=>k.value=!1)},{default:a(()=>e[33]||(e[33]=[s("取消")])),_:1}),y.value!=="view"?(u(),d(n,{key:0,type:"primary",onClick:G},{default:a(()=>e[34]||(e[34]=[s("确定")])),_:1})):C("",!0)])]),default:a(()=>[t(E,{model:o,rules:j,ref_key:"formRef",ref:T,"label-width":"100px",disabled:y.value==="view"},{default:a(()=>[t(r,{label:"仓库名称",prop:"warehouseId"},{default:a(()=>[t(v,{modelValue:o.warehouseId,"onUpdate:modelValue":e[8]||(e[8]=l=>o.warehouseId=l),placeholder:"请选择仓库",style:{width:"100%"}},{default:a(()=>[(u(!0),V(I,null,N(M.value,l=>(u(),d(b,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"设备名称",prop:"equipmentId"},{default:a(()=>[t(v,{modelValue:o.equipmentId,"onUpdate:modelValue":e[9]||(e[9]=l=>o.equipmentId=l),placeholder:"请选择设备",style:{width:"100%"}},{default:a(()=>[(u(!0),V(I,null,N(F.value,l=>(u(),d(b,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"数量",prop:"quantity"},{default:a(()=>[t(Q,{modelValue:o.quantity,"onUpdate:modelValue":e[10]||(e[10]=l=>o.quantity=l),min:1,max:999,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(r,{label:"领用人",prop:"recipientName"},{default:a(()=>[t(h,{modelValue:o.recipientName,"onUpdate:modelValue":e[11]||(e[11]=l=>o.recipientName=l),placeholder:"请输入领用人"},null,8,["modelValue"])]),_:1}),t(r,{label:"领用科室",prop:"departmentId"},{default:a(()=>[t(v,{modelValue:o.departmentId,"onUpdate:modelValue":e[12]||(e[12]=l=>o.departmentId=l),placeholder:"请选择科室",style:{width:"100%"}},{default:a(()=>[(u(!0),V(I,null,N(O.value,l=>(u(),d(b,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"出库时间",prop:"outboundTime"},{default:a(()=>[t(B,{modelValue:o.outboundTime,"onUpdate:modelValue":e[13]||(e[13]=l=>o.outboundTime=l),type:"datetime",placeholder:"选择日期时间",style:{width:"100%"},"value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),t(r,{label:"用途",prop:"purpose"},{default:a(()=>[t(v,{modelValue:o.purpose,"onUpdate:modelValue":e[14]||(e[14]=l=>o.purpose=l),placeholder:"请选择用途",style:{width:"100%"}},{default:a(()=>[t(b,{label:"借调",value:"借调"}),t(b,{label:"科室自用",value:"科室自用"}),t(b,{label:"退货",value:"退货"})]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"责任人",prop:"responsiblePerson"},{default:a(()=>[t(h,{modelValue:o.responsiblePerson,"onUpdate:modelValue":e[15]||(e[15]=l=>o.responsiblePerson=l),placeholder:"请输入责任人"},null,8,["modelValue"])]),_:1}),t(r,{label:"备注",prop:"remark"},{default:a(()=>[t(h,{modelValue:o.remark,"onUpdate:modelValue":e[16]||(e[16]=l=>o.remark=l),type:"textarea",placeholder:"请输入备注",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model","disabled"])]),_:1},8,["title","modelValue"])])}}},fe=ee(ie,[["__scopeId","data-v-3d1ce549"]]);export{fe as default};
