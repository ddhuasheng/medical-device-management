import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import{r as d,o as E,b as n,d as m,e as f,f as t,w as o,k as p,F,h as B,E as v,i as N}from"./index-7b3de2f1.js";const T={class:"page-container"},q={__name:"DepartmentManagement",setup(L){const l=d({name:"",code:"",parentId:null,director:"",status:1}),b={name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],code:[{required:!0,message:"请生成部门编码",trigger:"blur"}]},V=d([]),g={value:"id",label:"name",checkStrictly:!0},k=d([]),c=()=>{const s=new Date().getTime().toString().slice(-4);l.value.code=`DEPT-${s}`},x=async()=>{try{v.success("提交成功"),i()}catch{v.error("提交失败")}},i=()=>{l.value={name:"",code:"",parentId:null,director:"",status:1}};return E(()=>{c()}),(s,e)=>{const _=n("el-input"),r=n("el-form-item"),u=n("el-button"),y=n("el-cascader"),w=n("el-option"),C=n("el-select"),D=n("el-switch"),I=n("el-form"),M=n("el-card");return m(),f("div",T,[t(M,{class:"form-card"},{default:o(()=>[t(I,{ref:"form",model:l.value,"label-width":"120px",rules:b},{default:o(()=>[t(r,{label:"部门名称",prop:"name"},{default:o(()=>[t(_,{modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.name=a),placeholder:"请输入部门名称"},null,8,["modelValue"])]),_:1}),t(r,{label:"部门编码",prop:"code"},{default:o(()=>[t(_,{modelValue:l.value.code,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.code=a),placeholder:"自动生成",disabled:!0,class:"auto-code-input"},{append:o(()=>[t(u,{onClick:c},{default:o(()=>e[5]||(e[5]=[p("重新生成")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"上级部门",prop:"parentId"},{default:o(()=>[t(y,{modelValue:l.value.parentId,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.parentId=a),options:V.value,props:g,clearable:"",placeholder:"请选择上级部门"},null,8,["modelValue","options"])]),_:1}),t(r,{label:"部门主任",prop:"director"},{default:o(()=>[t(C,{modelValue:l.value.director,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.director=a),placeholder:"请选择部门主任",filterable:"",clearable:""},{default:o(()=>[(m(!0),f(F,null,B(k.value,a=>(m(),N(w,{key:a.id,label:a.realName,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"状态",prop:"status"},{default:o(()=>[t(D,{modelValue:l.value.status,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.status=a),"active-text":"启用","inactive-text":"停用","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),t(r,null,{default:o(()=>[t(u,{type:"primary",onClick:x},{default:o(()=>e[6]||(e[6]=[p("提交")])),_:1}),t(u,{onClick:i},{default:o(()=>e[7]||(e[7]=[p("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},O=U(q,[["__scopeId","data-v-8e2b713b"]]);export{O as default};
