import{q as $,r as v,o as ke,b as i,v as ye,d as _,e as k,f as e,w as t,g as x,E as y,B as Z,F as ee,h as le,k as s,j as F,x as we,i as T,t as b,y as Ve,z as Pe,A as he}from"./index-8e7c3932.js";import{_ as Ne}from"./plugin-vueexport-helper-c27b6911.js";const xe={class:"supplier-management-container"},Te={class:"table-toolbar"},qe={key:1},Se={key:1},Le={class:"pagination-container"},Ue={class:"dialog-footer"},De={key:1},Be={key:1},ze={__name:"SupplierManagement",setup($e){const L=[{value:"active",label:"正常"},{value:"inactive",label:"禁用"}],G=n=>{switch(n){case"active":return"success";case"inactive":return"info";default:return"info"}},M=n=>{const l=L.find(c=>c.value===n);return l?l.label:n},u=$({supplierName:"",contactPerson:"",contactPhone:"",status:""}),te=()=>{u.supplierName="",u.contactPerson="",u.contactPhone="",u.status="",E()},E=()=>{P.value=1,C()},U=v(!1),j=v([]),P=v(1),h=v(10),R=v(0),q=v([]),C=()=>{U.value=!0,setTimeout(()=>{let l=[...[{id:1,supplierCode:"GYS20230001",supplierName:"北京医疗设备有限公司",contactPerson:"张三",contactPhone:"13800138001",email:"zhangsan@example.com",address:"北京市海淀区中关村南大街5号",businessLicense:"license1.pdf",qualificationCert:"cert1.pdf",status:"active",createTime:"2023-06-15 10:30:00",updateTime:"2023-06-15 10:30:00",remark:"主要提供CT、MRI等大型医疗设备"},{id:2,supplierCode:"GYS20230002",supplierName:"上海医疗器械有限公司",contactPerson:"李四",contactPhone:"13900139002",email:"lisi@example.com",address:"上海市浦东新区张江高科技园区",businessLicense:"license2.pdf",qualificationCert:"cert2.pdf",status:"active",createTime:"2023-06-20 14:20:00",updateTime:"2023-06-20 14:20:00",remark:"专注于手术器械和医疗耗材"},{id:3,supplierCode:"GYS20230003",supplierName:"广州医疗科技有限公司",contactPerson:"王五",contactPhone:"13700137003",email:"wangwu@example.com",address:"广州市天河区珠江新城",businessLicense:"license3.pdf",qualificationCert:"cert3.pdf",status:"inactive",createTime:"2023-07-05 09:15:00",updateTime:"2023-07-10 16:30:00",remark:"提供各类医疗监护设备"}]];u.supplierName&&(l=l.filter(g=>g.supplierName.includes(u.supplierName))),u.contactPerson&&(l=l.filter(g=>g.contactPerson.includes(u.contactPerson))),u.contactPhone&&(l=l.filter(g=>g.contactPhone.includes(u.contactPhone))),u.status&&(l=l.filter(g=>g.status===u.status)),R.value=l.length;const c=(P.value-1)*h.value,r=c+h.value;j.value=l.slice(c,r),U.value=!1},500)},ae=n=>{q.value=n},oe=n=>{h.value=n,C()},ne=n=>{P.value=n,C()},w=v(!1),N=v("add"),O=v(null),D=v(!1),o=$({id:null,supplierCode:"",supplierName:"",contactPerson:"",contactPhone:"",email:"",address:"",businessLicense:null,qualificationCert:null,status:"active",remark:""}),d=$({id:null,supplierCode:"",supplierName:"",contactPerson:"",contactPhone:"",email:"",address:"",businessLicense:null,qualificationCert:null,status:"",createTime:"",updateTime:"",remark:""}),se={supplierCode:[{required:!0,message:"请输入供应商编码",trigger:"blur"}],supplierName:[{required:!0,message:"请输入供应商名称",trigger:"blur"}],contactPerson:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},ue=()=>{N.value="add",Y(),w.value=!0},ie=n=>{N.value="edit",Y(),Object.assign(o,n),w.value=!0},re=n=>{Object.assign(d,n),D.value=!0},Y=()=>{o.id=null,o.supplierCode="",o.supplierName="",o.contactPerson="",o.contactPhone="",o.email="",o.address="",o.businessLicense=null,o.qualificationCert=null,o.status="active",o.remark=""},de=()=>{O.value.validate(n=>{n&&(y.success(N.value==="add"?"新增成功":"编辑成功"),w.value=!1,C())})},pe=n=>{Z.confirm("确定要删除该供应商吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{y.success("删除成功"),C()}).catch(()=>{})},ce=()=>{if(q.value.length===0){y.warning("请选择要删除的供应商");return}Z.confirm(`确定要删除选中的 ${q.value.length} 个供应商吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{y.success("批量删除成功"),C()}).catch(()=>{})},me=()=>{y.success("导出成功")},fe=n=>{o.businessLicense=n.raw},_e=n=>{o.qualificationCert=n.raw},A=n=>{y.info("查看营业执照："+n.businessLicense)},I=n=>{y.info("查看资质证书："+n.qualificationCert)};return ke(()=>{C()}),(n,l)=>{const c=i("el-input"),r=i("el-form-item"),g=i("el-option"),J=i("el-select"),p=i("el-button"),Q=i("el-form"),H=i("el-card"),B=i("el-icon"),m=i("el-table-column"),K=i("el-tag"),be=i("el-table"),ge=i("el-pagination"),V=i("el-col"),z=i("el-row"),W=i("el-upload"),X=i("el-dialog"),f=i("el-descriptions-item"),ve=i("el-descriptions"),Ce=ye("loading");return _(),k("div",xe,[e(H,{class:"search-card"},{default:t(()=>[e(Q,{inline:!0,model:u,class:"search-form"},{default:t(()=>[e(r,{label:"供应商名称"},{default:t(()=>[e(c,{modelValue:u.supplierName,"onUpdate:modelValue":l[0]||(l[0]=a=>u.supplierName=a),placeholder:"请输入供应商名称",clearable:""},null,8,["modelValue"])]),_:1}),e(r,{label:"联系人"},{default:t(()=>[e(c,{modelValue:u.contactPerson,"onUpdate:modelValue":l[1]||(l[1]=a=>u.contactPerson=a),placeholder:"请输入联系人",clearable:""},null,8,["modelValue"])]),_:1}),e(r,{label:"联系电话"},{default:t(()=>[e(c,{modelValue:u.contactPhone,"onUpdate:modelValue":l[2]||(l[2]=a=>u.contactPhone=a),placeholder:"请输入联系电话",clearable:""},null,8,["modelValue"])]),_:1}),e(r,{label:"状态"},{default:t(()=>[e(J,{modelValue:u.status,"onUpdate:modelValue":l[3]||(l[3]=a=>u.status=a),placeholder:"请选择状态",clearable:""},{default:t(()=>[(_(),k(ee,null,le(L,a=>e(g,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(r,null,{default:t(()=>[e(p,{type:"primary",onClick:E},{default:t(()=>l[19]||(l[19]=[s("搜索")])),_:1}),e(p,{onClick:te},{default:t(()=>l[20]||(l[20]=[s("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),x("div",Te,[e(p,{type:"primary",onClick:ue},{default:t(()=>[e(B,null,{default:t(()=>[e(F(Ve))]),_:1}),l[21]||(l[21]=s("新增供应商 "))]),_:1}),e(p,{type:"danger",disabled:!q.value.length,onClick:ce},{default:t(()=>[e(B,null,{default:t(()=>[e(F(Pe))]),_:1}),l[22]||(l[22]=s("批量删除 "))]),_:1},8,["disabled"]),e(p,{type:"success",onClick:me},{default:t(()=>[e(B,null,{default:t(()=>[e(F(he))]),_:1}),l[23]||(l[23]=s("导出 "))]),_:1})]),e(H,{class:"table-card"},{default:t(()=>[we((_(),T(be,{data:j.value,border:"",style:{width:"100%"},onSelectionChange:ae},{default:t(()=>[e(m,{type:"selection",width:"55"}),e(m,{prop:"supplierCode",label:"供应商编码",width:"120"}),e(m,{prop:"supplierName",label:"供应商名称",width:"180"}),e(m,{prop:"contactPerson",label:"联系人",width:"100"}),e(m,{prop:"contactPhone",label:"联系电话",width:"120"}),e(m,{prop:"email",label:"电子邮箱",width:"150"}),e(m,{prop:"address",label:"地址",width:"200","show-overflow-tooltip":""}),e(m,{prop:"businessLicense",label:"营业执照",width:"120"},{default:t(a=>[a.row.businessLicense?(_(),T(p,{key:0,type:"primary",link:"",onClick:S=>A(a.row)},{default:t(()=>l[24]||(l[24]=[s(" 查看 ")])),_:2},1032,["onClick"])):(_(),k("span",qe,"未上传"))]),_:1}),e(m,{prop:"qualificationCert",label:"资质证书",width:"120"},{default:t(a=>[a.row.qualificationCert?(_(),T(p,{key:0,type:"primary",link:"",onClick:S=>I(a.row)},{default:t(()=>l[25]||(l[25]=[s(" 查看 ")])),_:2},1032,["onClick"])):(_(),k("span",Se,"未上传"))]),_:1}),e(m,{prop:"status",label:"状态",width:"100"},{default:t(a=>[e(K,{type:G(a.row.status)},{default:t(()=>[s(b(M(a.row.status)),1)]),_:2},1032,["type"])]),_:1}),e(m,{prop:"createTime",label:"创建时间",width:"150"}),e(m,{label:"操作",fixed:"right",width:"200"},{default:t(a=>[e(p,{type:"primary",link:"",onClick:S=>re(a.row)},{default:t(()=>l[26]||(l[26]=[s(" 查看 ")])),_:2},1032,["onClick"]),e(p,{type:"primary",link:"",onClick:S=>ie(a.row)},{default:t(()=>l[27]||(l[27]=[s(" 编辑 ")])),_:2},1032,["onClick"]),e(p,{type:"danger",link:"",onClick:S=>pe(a.row)},{default:t(()=>l[28]||(l[28]=[s(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ce,U.value]]),x("div",Le,[e(ge,{"current-page":P.value,"onUpdate:currentPage":l[4]||(l[4]=a=>P.value=a),"page-size":h.value,"onUpdate:pageSize":l[5]||(l[5]=a=>h.value=a),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:R.value,onSizeChange:oe,onCurrentChange:ne},null,8,["current-page","page-size","total"])])]),_:1}),e(X,{title:N.value==="add"?"新增供应商":"编辑供应商",modelValue:w.value,"onUpdate:modelValue":l[15]||(l[15]=a=>w.value=a),width:"700px"},{footer:t(()=>[x("span",Ue,[e(p,{onClick:l[14]||(l[14]=a=>w.value=!1)},{default:t(()=>l[33]||(l[33]=[s("取消")])),_:1}),e(p,{type:"primary",onClick:de},{default:t(()=>l[34]||(l[34]=[s("确定")])),_:1})])]),default:t(()=>[e(Q,{ref_key:"formRef",ref:O,model:o,rules:se,"label-width":"100px"},{default:t(()=>[e(z,{gutter:20},{default:t(()=>[e(V,{span:12},{default:t(()=>[e(r,{label:"供应商编码",prop:"supplierCode"},{default:t(()=>[e(c,{modelValue:o.supplierCode,"onUpdate:modelValue":l[6]||(l[6]=a=>o.supplierCode=a),placeholder:"请输入供应商编码",disabled:N.value==="edit"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(V,{span:12},{default:t(()=>[e(r,{label:"供应商名称",prop:"supplierName"},{default:t(()=>[e(c,{modelValue:o.supplierName,"onUpdate:modelValue":l[7]||(l[7]=a=>o.supplierName=a),placeholder:"请输入供应商名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(z,{gutter:20},{default:t(()=>[e(V,{span:12},{default:t(()=>[e(r,{label:"联系人",prop:"contactPerson"},{default:t(()=>[e(c,{modelValue:o.contactPerson,"onUpdate:modelValue":l[8]||(l[8]=a=>o.contactPerson=a),placeholder:"请输入联系人"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,{span:12},{default:t(()=>[e(r,{label:"联系电话",prop:"contactPhone"},{default:t(()=>[e(c,{modelValue:o.contactPhone,"onUpdate:modelValue":l[9]||(l[9]=a=>o.contactPhone=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(z,{gutter:20},{default:t(()=>[e(V,{span:12},{default:t(()=>[e(r,{label:"电子邮箱",prop:"email"},{default:t(()=>[e(c,{modelValue:o.email,"onUpdate:modelValue":l[10]||(l[10]=a=>o.email=a),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,{span:12},{default:t(()=>[e(r,{label:"状态",prop:"status"},{default:t(()=>[e(J,{modelValue:o.status,"onUpdate:modelValue":l[11]||(l[11]=a=>o.status=a),placeholder:"请选择状态"},{default:t(()=>[(_(),k(ee,null,le(L,a=>e(g,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,{label:"地址",prop:"address"},{default:t(()=>[e(c,{modelValue:o.address,"onUpdate:modelValue":l[12]||(l[12]=a=>o.address=a),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1}),e(r,{label:"营业执照",prop:"businessLicense"},{default:t(()=>[e(W,{class:"upload-demo",action:"#","auto-upload":!1,"on-change":fe,limit:1},{trigger:t(()=>[e(p,{type:"primary"},{default:t(()=>l[29]||(l[29]=[s("选择文件")])),_:1})]),tip:t(()=>l[30]||(l[30]=[x("div",{class:"el-upload__tip"}," 请上传营业执照，支持JPG、PNG、PDF格式 ",-1)])),_:1})]),_:1}),e(r,{label:"资质证书",prop:"qualificationCert"},{default:t(()=>[e(W,{class:"upload-demo",action:"#","auto-upload":!1,"on-change":_e,limit:1},{trigger:t(()=>[e(p,{type:"primary"},{default:t(()=>l[31]||(l[31]=[s("选择文件")])),_:1})]),tip:t(()=>l[32]||(l[32]=[x("div",{class:"el-upload__tip"}," 请上传资质证书，支持JPG、PNG、PDF格式 ",-1)])),_:1})]),_:1}),e(r,{label:"备注",prop:"remark"},{default:t(()=>[e(c,{modelValue:o.remark,"onUpdate:modelValue":l[13]||(l[13]=a=>o.remark=a),type:"textarea",placeholder:"请输入备注信息",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"]),e(X,{title:"供应商详情",modelValue:D.value,"onUpdate:modelValue":l[18]||(l[18]=a=>D.value=a),width:"700px"},{default:t(()=>[e(ve,{column:2,border:""},{default:t(()=>[e(f,{label:"供应商编码"},{default:t(()=>[s(b(d.supplierCode),1)]),_:1}),e(f,{label:"供应商名称"},{default:t(()=>[s(b(d.supplierName),1)]),_:1}),e(f,{label:"联系人"},{default:t(()=>[s(b(d.contactPerson),1)]),_:1}),e(f,{label:"联系电话"},{default:t(()=>[s(b(d.contactPhone),1)]),_:1}),e(f,{label:"电子邮箱"},{default:t(()=>[s(b(d.email),1)]),_:1}),e(f,{label:"状态"},{default:t(()=>[e(K,{type:G(d.status)},{default:t(()=>[s(b(M(d.status)),1)]),_:1},8,["type"])]),_:1}),e(f,{label:"地址",span:2},{default:t(()=>[s(b(d.address),1)]),_:1}),e(f,{label:"营业执照",span:2},{default:t(()=>[d.businessLicense?(_(),T(p,{key:0,type:"primary",link:"",onClick:l[16]||(l[16]=a=>A(d))},{default:t(()=>l[35]||(l[35]=[s(" 查看 ")])),_:1})):(_(),k("span",De,"未上传"))]),_:1}),e(f,{label:"资质证书",span:2},{default:t(()=>[d.qualificationCert?(_(),T(p,{key:0,type:"primary",link:"",onClick:l[17]||(l[17]=a=>I(d))},{default:t(()=>l[36]||(l[36]=[s(" 查看 ")])),_:1})):(_(),k("span",Be,"未上传"))]),_:1}),e(f,{label:"创建时间"},{default:t(()=>[s(b(d.createTime),1)]),_:1}),e(f,{label:"更新时间"},{default:t(()=>[s(b(d.updateTime),1)]),_:1}),e(f,{label:"备注",span:2},{default:t(()=>[s(b(d.remark),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Me=Ne(ze,[["__scopeId","data-v-0921d2b5"]]);export{Me as default};
